\set ECHO none
SELECT lock_file(1, 1, 'read');
 lock_file 
-----------
 
(1 row)

SELECT lock_file(1, 1, 'read');
 lock_file 
-----------
 
(1 row)

SELECT lock_file(1, 999, 'read');
ERROR:  File not found
SELECT lock_file(1, 2, 'bad');
ERROR:  new row for relation "file_locks" violates check constraint "file_locks_lock_mode_check"
