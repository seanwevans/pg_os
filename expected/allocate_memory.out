-- tests for memory allocation
\set ECHO none
SELECT allocate_memory(2, 1, 512);
 allocate_memory 
-----------------
 
(1 row)

SELECT process_id, segment_id FROM process_memory;
 process_id | segment_id 
------------+------------
          1 |          1
(1 row)

SELECT allocate_memory(1, 1, 512);
ERROR:  User 1 does not have permission to allocate memory
SELECT free_memory(2, 1, 1);
 free_memory 
-------------
 
(1 row)

SELECT count(*) FROM process_memory;
 count 
-------
     0
(1 row)

